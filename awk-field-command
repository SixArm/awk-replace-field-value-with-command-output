#!/usr/local/bin/awk -f

##
# awk-field-command: replace a specified field value with a system command
#
# Syntax:
#
#     awk-field-command
#
# Example:
#
#     awk -v field=x command='echo $RANDOM'
#
# Example input file `example.txt`:
#
#     foo x
#     goo x
#     hoo x
#
# Example run:
#
#     cat example.txt | awk -v field=x command='echo $RANDOM'
#
# Example output:
#
#     foo 24638
#     foo 8709
#     foo 15801
##

{
    for(i=1; i<=NF; i++){
        if ($i==field){
            command|getline $i
            close(command)
        }
    }
    print $0
}
